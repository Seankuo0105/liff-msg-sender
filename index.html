<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>山豬自動傳訊息</title>
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
</head>
<body>
  <h3 id="status">初始化中...</h3>

  <script>
    async function main() {
      await liff.init({ liffId: "你的 LIFF ID" }); // ←請填你剛剛在 LINE Developers 上建立的 LIFF ID

      if (!liff.isLoggedIn()) {
        liff.login();
        return;
      }

      // 使用者已登入，可以傳送訊息
      try {
        await liff.sendMessages([
          {
            type: "text",
            text: "我是山豬"
          }
        ]);
        document.getElementById("status").innerText = "✅ 已傳送「我是山豬」訊息！";
        // 傳送完自動關閉 LIFF 視窗
        setTimeout(() => liff.closeWindow(), 1500);
      } catch (err) {
        console.error("傳送訊息失敗", err);
        document.getElementById("status").innerText = "❌ 傳送失敗：" + err.message;
      }
    }

    main();
  </script>
</body>
</html>
